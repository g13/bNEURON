SRCDIR = ../src/
OUTPUTDIR = ../singleRun/
CC = g++
MATLIB = -lm -lmat -lmx
PYLIB = -lpython2.7 
LBOOST = -lboost_program_options
OPT = -msee4.2 -march=westmere -fPIC 
DEBUG = -g -fmax-errors=2 -fno-omit-frame-pointer
CXXFLAG = -std=c++11 -fPIC 
all : sR #gC
    
    sR : $(SRCDIR)nsynBeta.cpp nlib.o nn.o cbl.o jb.o jl.o    # single run comparison of NEURON simulation, continuous bilinear linear and jumpy ones
        $(CC) $(CXXFLAG) $(PYLIB) $(LBOOST) $? -o $(OUTPUTDIR)$@
    cbl.o : $(SRCDIR)nsynBiTest3.h nlib.o nn.o   # continuous bilinear and linear
        $(CC) -c $(CXXFLAG) $? -o $@ 
    jb.o : $(SRCDIR)nsynJtest3.h nlib.o nn.o type.o nNapi.o # jumpy bilinear
        $(CC) -c $(CXXFLAG) $? -o $@ 
    jl.o : $(SRCDIR)nsynJltest3.h nlib.o nn.o type.o nNapi.o jb.o  # jumpy linear
        $(CC) -c $(CXXFLAG) $? -o $@ 
    nlib.o : $(SRCDIR)nNeuroLib.h mat.o          # read bilinear library
        $(CC) -c $(CXXFLAG) $(MATLIB) $? -o $@
    nn.o : $(SRCDIR)nNeuroSt2.h heap.o nlib.o    # neuron input class
        $(CC) -c $(CXXFLAG) $? -o $@ 
    type.o : $(SRCDIR)typedefs.h                 # variable type rename
        $(CC) $(CXXFLAG) $< -o $@
    heap.o : $(SRCDIR)heap.h                     # heap sort module
        $(CC) -c $(CXXFLAG) $? -o $@
    mat.o : $(SRCDIR)matFunc.h                   # .mat file aux func  
        $(CC) -c $(CXXFLAG) $(MATLIB) $? -o $@
    
    nNapi.o : $(SRCDIR)neuroTest.h nn.o type.o   # c-python-NEURON api
        $(CC) -c $(CXXFLAG) $(PYLIB) $? -o $@
clean:
	rm *.o 
